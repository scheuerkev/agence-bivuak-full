extends ../layout.pug

block content
    header.blog-head
        .container.px-4.px-lg-5
            .row.gx-4.gx-5-lg.align-items-center.justify-content-between.text-center.flex-column
                .col-lg-8 
                    h2.master-head--subheading.text-uppercase.font-weight-bold.text-dark Le blog de l'Agence Bivuak
                    hr.divider.my-1.my-xs-3
                    h1.master-head--heading.text-dark Les derniers articles !
    main
        section.page-section#blog.py-4
            .container
                .row.gx-4.gx-lg-5.justify-content-center
                    .col-md-10.col-lg-8.col-xl-7#posts-container
                        if posts
                            each post in posts 
                                .post-preview
                                    .row 
                                        .col-md-8
                                            h4.mb-2.post-title
                                                a(href=`/blog/${post.slug}`)=  post.title 
                                            p.post-subtitle= post.content
                                        .col-md-4 
                                            img.img-fluid.img-preview(src=`${post.img}` alt="...")
                                    .row.mt-3
                                        .col-md-8         
                                            p.post-meta.text-muted(style="line-height: initial;") Publié par !{post.author.username} le !{post.createdAt.toLocaleDateString()}
                                        .col-md-4
                                            a.text-uppercase(href=`/blog/${post.slug}`) Lire la suite →
                                    hr.article-divider.mb-4
                        .d-flex.justify-content-end.mb-4.d-none 
                            a.btn.btn-primary.text-uppercase(href="#!") Anciens articles →
                        if currentUser    
                            if currentUser.role === 1
                                a(href=("blog/new")) Écrire un nouvel article
    include ../includes/footer.pug
    include ../includes/scripts.pug
    script(src="/js/blog-mainpage.js")